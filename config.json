{
    "meta": {
        "version": "1.0.0",
        "pipeline_version": "1.0.0"
    },
     "parents": {
        "survey": {
            "location": "https://github.com/IDEMSInternational/rapidpro-survey-templates/archive/refs/tags/v1.3.1.zip"
        }
    },
    "flows_outputbasename": "parenttext_all",
    "output_split_number": 2,
    "sheet_names": {
        "PA_sheets": "1hYDdrnxLhR7NKaJB_eUH3xL7WvG9u8c59ZGjzsBF9Mg",
        "N_triggers": "195s4fnuluMNyls9S1ghjC2e7DaxczT2BPsOwEcDfvY8",
        "T_content": "1IlKACAmKqILhpumKRiTf8ovWO7h7MIJurIYqj-SgMXo",
        "C_dev_asess_tool" : "1zducXLM9OwD8G5quEzYDjqrelBdeCr_4h88nGAjL74M",
        "T_safeguarding": "1RZLY7GGILdBHkc4G-tzymYbNN0lvONgXJlPjG9Ol19I",
        "T_delivery": "1D54mvGh0Scbhv1rqCOFxqonxOtglLsYINkvuIceQV6c",
        "T_menu": "1IMV1slKvWN3P330v6S73JHlegjMHhPNSN3EW7UhiGUg",
        "C_ltp_activities": "10UPUaNwjB1Pog7aXq_kuIMJ18TvQTada4zo0DrzHK_w",
        "C_modules_all_ages": "1Aj0OhvVqOgNoIEZs26ffes0B0vGlsc1z9f_QdMaB_vw",
        "C_modules_child": "17_S_UhYTAA6_E2UQujrquezOMx-F9yjEm6HV5Bh64Sg",
        "C_modules_teen": "10kFnGIEDf64abqR_uYQd92ofQSHKmZqdCLDPxWAXB3Y",
        "C_goal_checkin": "19la2M0oIc2pQW9EU4BkzIbWIIAmD0nbCS0Nb7iLkgww",

        "N_delivery_data": "1-qcZrH18Hn1VWLXGrHdH6lP7I0_FDYQ5mbxZyhmwfD8",
        "N_menu_data": "1tEmZ7bO64kgxIoJIecUqcffO_YQds4xe16GWR04jrms",
        "N_onboarding_data": "1UIu_Cstp446t6z8CrAzFUXei5pvaq8iqWLy9CLSPz1k",
        "N_safeguarding_data": "1StGMV9sAalQ6zOakNEtgqK78co8CK9Jwsj_eFaovf_0",

        "globals": "1gcSrIJV9ceuWiLlIPOKO-7_0G4lAGbQbaCuyX25Pgo0",

        "edit_sheet" : "1FqyUGAzCixpMvB9-CfqcoJcFbAeeEgvGtx20VBWpzCE"
    },
    "sources": {
        "flow_definitions": {
            "parent_sources": ["survey.flow_definitions"],
            "format": "sheets",
            "subformat": "google_sheets",
            "files_list": [
                    "globals",
                    "N_onboarding_data",
                    "C_ltp_activities",
                    "C_modules_all_ages",
                    "C_modules_teen",
                    "C_modules_child",
                    "C_goal_checkin",
                    "C_dev_asess_tool",
                    "T_content",
                    "N_safeguarding_data",
                    "T_safeguarding",
                    "N_delivery_data",
                    "T_delivery",
                    "N_menu_data",
                    "T_menu",
                    "N_triggers",
                    "PA_sheets"
                ]
        },
        "edits_pretranslation": {
            "parent_sources": [ ],
            "format": "sheets",
            "subformat": "google_sheets",
            "files_list": [
                "edit_sheet"
            ]
        },
        "expiration_times": {
            "format": "json",
            "files_dict": {
                "special_expiration_file": "./edits/specific_expiration.json"
            }
        },
        "qr_treatment": {
            "format": "json",
            "files_dict": {
                "select_phrases_file": "./edits/select_phrases.json",
                "special_words_file": "./edits/special_words.json"
            }
        },
        "safeguarding": {
            "format": "safeguarding",
            "sources": [
                {
                    "key": "spa",
                    "location": "1QXmuAiqa8RgpM3Xbtw3aem_6g2EeBTMM"
                 }
            ]
        },
        "goals_api": {
            "format": "sheets",
            "subformat": "google_sheets",
            "files_list": [
                "1yUzKndclwMurTwBgDTzA5ha7xLjj214oZy10KYtjW4U"
            ]
        },
        "media_assets": {
            "format": "media_assets",
            "mappings": {
                "Caregiver Gender": {
                    "F": "female",
                    "M": "male"
                }
            },
            "path_template": [
            "{% if format == 'image' %}{% if folder == 'Comics' %}comic/{{ name }}{% elif folder ==  'Logos' %}logo/{{ name }}{% elif folder ==  'Avatars' %}logo/{{ name }}{%else%}image/{{ name }}{% endif %}{% else %}voiceover/{{ format }}/{{ (annotations['Caregiver Gender'] or 'unknown') }}/spa/{{ name }}{% endif %}"
            ],
            "storage": {
                "system": "canto",
                "location": "V0LLG",
                "annotations": {
                    "site_base_url": "https://parentingforlifelonghealth.canto.com"
                }
            }
        }
    },
    "steps": [
        {
            "id": "create_flows",
            "type": "create_flows",
            "models_module": "models.parenttext_models",
            "sources": [
                "flow_definitions"
            ],
            "tags": []
        },
        {
            "id": "update_expiration_times",
            "type": "update_expiration_times",
            "sources": [
                "expiration_times"
            ],
            "default_expiration_time": 1440
        },
        {
            "id": "edits_pretranslation",
            "type": "edits",
            "sources": [
                "edits_pretranslation"
            ]
        },
        {
            "id": "hasanyword_pretranslation",
            "type": "has_any_word_check"
        },
        {
            "id": "overall_integrity_check_pretranslation",
            "type": "overall_integrity_check"
        },
        {
            "id": "qr_treatment",
            "type": "qr_treatment",
            "sources": [
                "qr_treatment"
            ],
            "qr_treatment": "reformat_whatsapp",
            "count_threshold": "13",
            "length_threshold": "18",
            "add_selectors": "yes"
        },
        {
            "id": "safeguarding",
            "type": "safeguarding",
            "sources": [
                "safeguarding"
            ],
            "redirect_flow_names": "[\"safeguarding_redirect_to_topic_all\", \"safeguarding_redirect_to_topic_start\", \"safeguarding_redirect_to_topic_trigger\"]"
        }
    ]
}